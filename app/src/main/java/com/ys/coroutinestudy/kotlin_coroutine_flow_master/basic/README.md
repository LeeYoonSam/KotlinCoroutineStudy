# 처음 만나는 코루틴

## 동시성

### 동시성 없이는 사용자가 불편

- 고대 사람들은 세이브 아이콘을 휴대
- 다운로드 중에는 다운로드만 하세요
- 한글 설치를 잘못하면 밤을 세어야 합니다.

### 동시성이 없다면, 하드웨어 리소스도 낭비

- 라이젠 3950X는 749,070 밉스
    - 밉스는 초당 100만개의 명령어를 처리할 수 있는 능력


### 해결하는 방법

- 합의해서 나누어 씁시다
    - 비선점형 멀티태스킹
- 중재자를 둡시다
    - 선점형 멀티태스킹
        - Ring 0을 가진 중재자 = 운영체제
    - 선점형 멀티태스킹을 위한 도구
        - 프로세스
            - 코드, 데이터, 힙, 스택등의 자료구조를 가짐
        - 스레드
            - 프로세스는 1개 이상의 스레드를 가지며 시분할에 의해 번갈아서 동작
            - 리눅스에서는 프로세스와 스레드와의 차이가 크지 않음(COW, Copy on Write 방식)
            - 윈도우에서는 프로세스의 생성이 느리기 때문에 스레드의 중요성이 커짐

## 병렬성

### SMP (Symmetric Multiprocessor, 대칭형 멀티프로세서)와 가시성

- 여러 프로세스가 하나의 메모리를 쓰는 모델
- 여러 프로세스가 물리적으로 여러 일을 동시에 사용하는 일이 가능해짐
- 하지만 프로그래밍 이슈가 범람
    - 여러 CPU가 개별 캐쉬를 사용하게 되면서 발생한 문제
    - 가짜 공유

## 왜 코루틴인가?

- 비동기, 병렬 프로그래밍에는 함정이 많습니다.
    - 콜백, RxJava가 이 문제들을 해결하기 위해 노력
- 코루틴은 동시성이냐 동시성이 아니냐에 따라 코드가 달라지지 않는다. 같은 코드로 모든곳에 적용 가능

### 코루틴과 플로우

- 코루틴은 비동기와 병렬성을 순차적으로 짤수 있는 코드 방법 제공
- 플로우는 비동기와 병렬성을 스트림의 형태로 풀수있는 방법 제공

### 순차적으로 사용 가능한 부분은 코루틴, 스트림이 맞는 부분은 플로우로 진행